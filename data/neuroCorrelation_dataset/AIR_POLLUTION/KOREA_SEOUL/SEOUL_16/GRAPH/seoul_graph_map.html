<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <script>
        // Inizializzazione mappa
        var map = L.map('map', {
            center: [37.566, 126.978],
            zoom: 11,
            zoomControl: true,
            preferCanvas: false,
        });

        // Tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Data by &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',
            detectRetina: false,
            maxNativeZoom: 18,
            maxZoom: 18,
            minZoom: 0,
            noWrap: false,
            opacity: 1,
            subdomains: 'abc',
            tms: false
        }).addTo(map);

        // Coordinate delle stazioni (basate sul file originale)
        var stationCoords = {
            0: [37.572016, 127.005007],  // Jongno-gu
            1: [37.564263, 126.974676],  // Jung-gu
            2: [37.540033, 127.00485],   // Yongsan-gu
            3: [37.609823, 126.934848],  // Eunpyeong-gu
            4: [37.593742, 126.949679],  // Seodaemun-gu
            5: [37.55558, 126.905598],   // Mapo-gu
            6: [37.541864, 127.049659],  // Seongdong-gu
            7: [37.54718, 127.092493],   // Gwangjin-gu
            8: [37.575743, 127.028885],  // Dongdaemun-gu
            9: [37.584849, 127.094023],  // Jungnang-gu
            10: [37.606719, 127.027279], // Seongbuk-gu
            11: [37.64793, 127.011952],  // Gangbuk-gu
            12: [37.654192, 127.029088], // Dobong-gu
            13: [37.658774, 127.068505], // Nowon-gu
            14: [37.525939, 126.856603], // Yangcheon-gu
            15: [37.54464, 126.835151]   // Gangseo-gu
        };

        // Nomi delle stazioni
        var stationNames = {
            0: "Station 101 - Jongno-gu",
            1: "Station 102 - Jung-gu", 
            2: "Station 103 - Yongsan-gu",
            3: "Station 104 - Eunpyeong-gu",
            4: "Station 105 - Seodaemun-gu",
            5: "Station 106 - Mapo-gu",
            6: "Station 107 - Seongdong-gu",
            7: "Station 108 - Gwangjin-gu",
            8: "Station 109 - Dongdaemun-gu",
            9: "Station 110 - Jungnang-gu",
            10: "Station 111 - Seongbuk-gu",
            11: "Station 112 - Gangbuk-gu",
            12: "Station 113 - Dobong-gu",
            13: "Station 114 - Nowon-gu",
            14: "Station 115 - Yangcheon-gu",
            15: "Station 116 - Gangseo-gu"
        };

        // Dati delle connessioni
        var fromNodes = [0,0,0,0,1,1,1,1,2,2,2,3,3,4,4,4,4,5,5,5,5,5,6,6,6,6,6,7,7,7,8,8,8,8,8,9,9,9,9,9,9,10,10,10,10,10,10,11,11,11,12,12,12,12,13,13,13,13,14,14,15,15];
        var toNodes = [1,2,8,6,4,5,2,0,1,0,6,4,5,3,5,10,1,3,4,1,14,15,0,2,8,9,7,9,8,6,10,9,7,6,0,13,12,10,8,6,7,11,12,13,9,8,4,12,13,10,11,10,13,9,12,11,10,9,5,15,5,14];

        // Aggiungi markers per le stazioni
        for (let i = 0; i < 16; i++) {
            L.circleMarker(stationCoords[i], {
                color: 'blue',
                fillColor: 'blue',
                fillOpacity: 0.2,
                radius: 6,
                weight: 3
            }).addTo(map).bindPopup(stationNames[i]);
        }

        // Aggiungi le connessioni
        for (let i = 0; i < fromNodes.length; i++) {
            let from = fromNodes[i];
            let to = toNodes[i];
            
            L.polyline([stationCoords[from], stationCoords[to]], {
                color: 'red',
                weight: 2,
                opacity: 1.0
            }).addTo(map);
        }

        // Aggiungi informazioni sulla rete
        var info = L.control({position: 'topright'});
        info.onAdd = function (map) {
            var div = L.DomUtil.create('div', 'info');
            div.innerHTML = '<h4>Seoul Network</h4>' +
                           '<b>Stations:</b> 16<br/>' +
                           '<b>Connections:</b> ' + fromNodes.length + '<br/>' +
                           '<small>Blue markers: Stations<br/>Red lines: Connections</small>';
            div.style.background = 'white';
            div.style.padding = '10px';
            div.style.border = '2px solid #ccc';
            div.style.borderRadius = '5px';
            return div;
        };
        info.addTo(map);

    </script>
</body>
</html>